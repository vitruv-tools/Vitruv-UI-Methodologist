{"ast":null,"code":"var _jsxFileName = \"/Users/mohamadali/vitruvius-modeler/src/App.tsx\",\n  _s = $RefreshSig$();\nimport React, { useCallback, useRef, useState } from 'react';\nimport ReactFlow, { MiniMap, Controls, Background, useNodesState, useEdgesState, addEdge } from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport { Sidebar } from './Sidebar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialNodes = [{\n  id: '1',\n  position: {\n    x: 200,\n    y: 100\n  },\n  data: {\n    label: 'Drag me! (Sequence Table)'\n  },\n  type: 'default'\n}, {\n  id: '2',\n  position: {\n    x: 500,\n    y: 100\n  },\n  data: {\n    label: 'Drag me! (Object Table)'\n  },\n  type: 'default'\n}];\nconst initialEdges = [];\nlet id = 3;\nconst getId = () => (id++).toString();\nfunction App() {\n  _s();\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n  const reactFlowWrapper = useRef(null);\n  const [reactFlowInstance, setReactFlowInstance] = useState(null);\n  const onConnect = useCallback(params => setEdges(eds => addEdge(params, eds)), [setEdges]);\n  const onDrop = useCallback(event => {\n    var _reactFlowWrapper$cur;\n    event.preventDefault();\n\n    // CHANGED: Get type from React Flow drag event\n    const type = event.dataTransfer.getData('application/reactflow');\n    if (!type || !reactFlowInstance) return;\n\n    // Get the bounding rect of the flow wrapper\n    const reactFlowBounds = (_reactFlowWrapper$cur = reactFlowWrapper.current) === null || _reactFlowWrapper$cur === void 0 ? void 0 : _reactFlowWrapper$cur.getBoundingClientRect();\n    if (!reactFlowBounds) return;\n\n    // Mouse coordinates relative to canvas\n    const position = reactFlowInstance.project({\n      x: event.clientX - reactFlowBounds.left,\n      y: event.clientY - reactFlowBounds.top\n    });\n    let label = '';\n    if (type === 'sequence') label = 'Sequence Table';\n    if (type === 'object') label = 'Object Table';\n    const newNode = {\n      id: getId(),\n      type: 'default',\n      position,\n      data: {\n        label\n      }\n    };\n    setNodes(nds => nds.concat(newNode));\n  }, [reactFlowInstance, setNodes]);\n  const onDragOver = useCallback(event => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100vw',\n      height: '100vh',\n      display: 'flex'\n    },\n    children: [/*#__PURE__*/_jsxDEV(Sidebar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: reactFlowWrapper,\n      style: {\n        flexGrow: 1,\n        height: '100vh',\n        marginLeft: 180\n      },\n      children: /*#__PURE__*/_jsxDEV(ReactFlow, {\n        nodes: nodes,\n        edges: edges,\n        onNodesChange: onNodesChange,\n        onEdgesChange: onEdgesChange,\n        onConnect: onConnect,\n        fitView: true,\n        onDrop: onDrop,\n        onDragOver: onDragOver,\n        onInit: setReactFlowInstance,\n        children: [/*#__PURE__*/_jsxDEV(MiniMap, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Background, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"o6JLkAVG6ceWMpDIGMpDS5Ib8VU=\", false, function () {\n  return [useNodesState, useEdgesState];\n});\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useCallback","useRef","useState","ReactFlow","MiniMap","Controls","Background","useNodesState","useEdgesState","addEdge","Sidebar","jsxDEV","_jsxDEV","initialNodes","id","position","x","y","data","label","type","initialEdges","getId","toString","App","_s","nodes","setNodes","onNodesChange","edges","setEdges","onEdgesChange","reactFlowWrapper","reactFlowInstance","setReactFlowInstance","onConnect","params","eds","onDrop","event","_reactFlowWrapper$cur","preventDefault","dataTransfer","getData","reactFlowBounds","current","getBoundingClientRect","project","clientX","left","clientY","top","newNode","nds","concat","onDragOver","dropEffect","style","width","height","display","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","flexGrow","marginLeft","fitView","onInit","_c","$RefreshReg$"],"sources":["/Users/mohamadali/vitruvius-modeler/src/App.tsx"],"sourcesContent":["import React, { useCallback, useRef, useState } from 'react';\nimport ReactFlow, {\n  MiniMap,\n  Controls,\n  Background,\n  useNodesState,\n  useEdgesState,\n  addEdge,\n  Connection,\n  Edge,\n  Node,\n  ReactFlowInstance\n} from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport { Sidebar } from './Sidebar';\n\nconst initialNodes: Node[] = [\n  {\n    id: '1',\n    position: { x: 200, y: 100 },\n    data: { label: 'Drag me! (Sequence Table)' },\n    type: 'default'\n  },\n  {\n    id: '2',\n    position: { x: 500, y: 100 },\n    data: { label: 'Drag me! (Object Table)' },\n    type: 'default'\n  }\n];\n\nconst initialEdges: Edge[] = [];\n\nlet id = 3;\nconst getId = () => (id++).toString();\n\nfunction App() {\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n  const reactFlowWrapper = useRef<HTMLDivElement>(null);\n  const [reactFlowInstance, setReactFlowInstance] = useState<ReactFlowInstance | null>(null);\n\n  const onConnect = useCallback(\n    (params: Edge | Connection) => setEdges((eds) => addEdge(params, eds)),\n    [setEdges]\n  );\n\n  const onDrop = useCallback(\n    (event: React.DragEvent) => {\n      event.preventDefault();\n\n      // CHANGED: Get type from React Flow drag event\n      const type = event.dataTransfer.getData('application/reactflow');\n      if (!type || !reactFlowInstance) return;\n\n      // Get the bounding rect of the flow wrapper\n      const reactFlowBounds = reactFlowWrapper.current?.getBoundingClientRect();\n      if (!reactFlowBounds) return;\n\n      // Mouse coordinates relative to canvas\n      const position = reactFlowInstance.project({\n        x: event.clientX - reactFlowBounds.left,\n        y: event.clientY - reactFlowBounds.top,\n      });\n\n      let label = '';\n      if (type === 'sequence') label = 'Sequence Table';\n      if (type === 'object') label = 'Object Table';\n\n      const newNode: Node = {\n        id: getId(),\n        type: 'default',\n        position,\n        data: { label }\n      };\n\n      setNodes((nds) => nds.concat(newNode));\n    },\n    [reactFlowInstance, setNodes]\n  );\n\n  const onDragOver = useCallback((event: React.DragEvent) => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  }, []);\n\n  return (\n    <div style={{ width: '100vw', height: '100vh', display: 'flex' }}>\n      <Sidebar />\n      <div\n        ref={reactFlowWrapper}\n        style={{ flexGrow: 1, height: '100vh', marginLeft: 180 }}\n      >\n        <ReactFlow\n          nodes={nodes}\n          edges={edges}\n          onNodesChange={onNodesChange}\n          onEdgesChange={onEdgesChange}\n          onConnect={onConnect}\n          fitView\n          onDrop={onDrop}\n          onDragOver={onDragOver}\n          onInit={setReactFlowInstance}\n        >\n          <MiniMap />\n          <Controls />\n          <Background />\n        </ReactFlow>\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}