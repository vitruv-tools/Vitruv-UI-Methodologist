{"ast":null,"code":"import React,{useCallback,useRef,useState}from'react';import{EditableNode}from'./EditableNode';import ReactFlow,{MiniMap,Controls,Background,useNodesState,useEdgesState,addEdge}from'reactflow';import'reactflow/dist/style.css';import{Sidebar}from'./Sidebar';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const nodeTypes={editable:EditableNode};const initialNodes=[];const initialEdges=[];let id=3;const getId=()=>(id++).toString();function App(){const[nodes,setNodes,onNodesChange]=useNodesState(initialNodes);const[edges,setEdges,onEdgesChange]=useEdgesState(initialEdges);const reactFlowWrapper=useRef(null);const[reactFlowInstance,setReactFlowInstance]=useState(null);const onConnect=useCallback(params=>setEdges(eds=>addEdge(params,eds)),[setEdges]);const onDrop=useCallback(event=>{var _reactFlowWrapper$cur;event.preventDefault();// React Flow expects 'application/reactflow' key for custom node types\nconst type=event.dataTransfer.getData('application/reactflow');if(!type||!reactFlowInstance)return;const reactFlowBounds=(_reactFlowWrapper$cur=reactFlowWrapper.current)===null||_reactFlowWrapper$cur===void 0?void 0:_reactFlowWrapper$cur.getBoundingClientRect();if(!reactFlowBounds)return;const position=reactFlowInstance.project({x:event.clientX-reactFlowBounds.left,y:event.clientY-reactFlowBounds.top});let label='';if(type==='sequence')label='Sequence Table';if(type==='object')label='Object Table';const newNode={id:getId(),type:'editable',position,data:{label,onLabelChange}};setNodes(nds=>nds.concat(newNode));},[reactFlowInstance,setNodes]);const onLabelChange=(id,newLabel)=>{setNodes(nds=>nds.map(node=>node.id===id?{...node,data:{...node.data,label:newLabel,onLabelChange}}:node));};const onDragOver=useCallback(event=>{event.preventDefault();event.dataTransfer.dropEffect='move';},[]);return/*#__PURE__*/_jsxs(\"div\",{style:{width:'100vw',height:'100vh',display:'flex'},children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{ref:reactFlowWrapper,style:{flexGrow:1,height:'100vh',marginLeft:180},children:[/*#__PURE__*/_jsx(\"div\",{style:{padding:10,position:'absolute',top:10,right:30,zIndex:100},children:/*#__PURE__*/_jsx(\"button\",{style:{padding:'8px 20px',fontSize:16,borderRadius:6,background:'#0091ea',color:'#fff',border:'none',cursor:'pointer'},onClick:()=>{console.log('DEPLOY:',{nodes,edges});alert('Model data printed to console!\\n(Next step: send to Vitruvius backend)');},children:\"Deploy\"})}),/*#__PURE__*/_jsxs(ReactFlow,{nodes:nodes,edges:edges,onNodesChange:onNodesChange,onEdgesChange:onEdgesChange,onConnect:onConnect,fitView:true,onDrop:onDrop,onDragOver:onDragOver,onInit:setReactFlowInstance,nodeTypes:nodeTypes,children:[/*#__PURE__*/_jsx(MiniMap,{}),/*#__PURE__*/_jsx(Controls,{}),/*#__PURE__*/_jsx(Background,{})]})]})]});}export default App;","map":{"version":3,"names":["React","useCallback","useRef","useState","EditableNode","ReactFlow","MiniMap","Controls","Background","useNodesState","useEdgesState","addEdge","Sidebar","jsx","_jsx","jsxs","_jsxs","nodeTypes","editable","initialNodes","initialEdges","id","getId","toString","App","nodes","setNodes","onNodesChange","edges","setEdges","onEdgesChange","reactFlowWrapper","reactFlowInstance","setReactFlowInstance","onConnect","params","eds","onDrop","event","_reactFlowWrapper$cur","preventDefault","type","dataTransfer","getData","reactFlowBounds","current","getBoundingClientRect","position","project","x","clientX","left","y","clientY","top","label","newNode","data","onLabelChange","nds","concat","newLabel","map","node","onDragOver","dropEffect","style","width","height","display","children","ref","flexGrow","marginLeft","padding","right","zIndex","fontSize","borderRadius","background","color","border","cursor","onClick","console","log","alert","fitView","onInit"],"sources":["/Users/mohamadali/Vitruv-UI-Methodologist/src/App.tsx"],"sourcesContent":["import React, { useCallback, useRef, useState } from 'react';\nimport { EditableNode } from './EditableNode';\n\nimport ReactFlow, {\n  MiniMap,\n  Controls,\n  Background,\n  useNodesState,\n  useEdgesState,\n  addEdge,\n  Connection,\n  Edge,\n  Node,\n  ReactFlowInstance\n} from 'reactflow';\nimport 'reactflow/dist/style.css';\nimport { Sidebar } from './Sidebar';\nconst nodeTypes = { editable: EditableNode };\nconst initialNodes: Node[] = [\n\n];\nconst initialEdges: Edge[] = [];\n\nlet id = 3;\nconst getId = () => (id++).toString();\n\nfunction App() {\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n  const reactFlowWrapper = useRef<HTMLDivElement>(null);\n  const [reactFlowInstance, setReactFlowInstance] = useState<ReactFlowInstance | null>(null);\n\n  const onConnect = useCallback(\n    (params: Edge | Connection) => setEdges((eds) => addEdge(params, eds)),\n    [setEdges]\n  );\n\n  const onDrop = useCallback(\n    (event: React.DragEvent) => {\n      event.preventDefault();\n\n      // React Flow expects 'application/reactflow' key for custom node types\n      const type = event.dataTransfer.getData('application/reactflow');\n      if (!type || !reactFlowInstance) return;\n\n      const reactFlowBounds = reactFlowWrapper.current?.getBoundingClientRect();\n      if (!reactFlowBounds) return;\n\n      const position = reactFlowInstance.project({\n        x: event.clientX - reactFlowBounds.left,\n        y: event.clientY - reactFlowBounds.top,\n      });\n\n      let label = '';\n      if (type === 'sequence') label = 'Sequence Table';\n      if (type === 'object') label = 'Object Table';\n\n      const newNode: Node = {\n        id: getId(),\n        type: 'editable',\n        position,\n        data: { label, onLabelChange }\n      };\n\n      setNodes((nds) => nds.concat(newNode));\n    },\n    [reactFlowInstance, setNodes]\n  );\n\n  const onLabelChange = (id: string, newLabel: string) => {\n    setNodes((nds) =>\n      nds.map((node) =>\n        node.id === id\n          ? { ...node, data: { ...node.data, label: newLabel, onLabelChange } }\n          : node\n      )\n    );\n  };\n\n  const onDragOver = useCallback((event: React.DragEvent) => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  }, []);\n\n  return (\n    <div style={{ width: '100vw', height: '100vh', display: 'flex' }}>\n      <Sidebar />\n      <div\n        ref={reactFlowWrapper}\n        style={{ flexGrow: 1, height: '100vh', marginLeft: 180 }}\n      >\n        {/* DEPLOY BUTTON */}\n        <div style={{ padding: 10, position: 'absolute', top: 10, right: 30, zIndex: 100 }}>\n          <button\n            style={{\n              padding: '8px 20px',\n              fontSize: 16,\n              borderRadius: 6,\n              background: '#0091ea',\n              color: '#fff',\n              border: 'none',\n              cursor: 'pointer',\n            }}\n            onClick={() => {\n              console.log('DEPLOY:', { nodes, edges });\n              alert('Model data printed to console!\\n(Next step: send to Vitruvius backend)');\n            }}\n          >\n            Deploy\n          </button>\n        </div>\n        <ReactFlow\n          nodes={nodes}\n          edges={edges}\n          onNodesChange={onNodesChange}\n          onEdgesChange={onEdgesChange}\n          onConnect={onConnect}\n          fitView\n          onDrop={onDrop}\n          onDragOver={onDragOver}\n          onInit={setReactFlowInstance}\n          nodeTypes={nodeTypes}\n        >\n          <MiniMap />\n          <Controls />\n          <Background />\n        </ReactFlow>\n      </div>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,WAAW,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAC5D,OAASC,YAAY,KAAQ,gBAAgB,CAE7C,MAAO,CAAAC,SAAS,EACdC,OAAO,CACPC,QAAQ,CACRC,UAAU,CACVC,aAAa,CACbC,aAAa,CACbC,OAAO,KAKF,WAAW,CAClB,MAAO,0BAA0B,CACjC,OAASC,OAAO,KAAQ,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACpC,KAAM,CAAAC,SAAS,CAAG,CAAEC,QAAQ,CAAEd,YAAa,CAAC,CAC5C,KAAM,CAAAe,YAAoB,CAAG,EAE5B,CACD,KAAM,CAAAC,YAAoB,CAAG,EAAE,CAE/B,GAAI,CAAAC,EAAE,CAAG,CAAC,CACV,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAACD,EAAE,EAAE,EAAEE,QAAQ,CAAC,CAAC,CAErC,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,KAAK,CAAEC,QAAQ,CAAEC,aAAa,CAAC,CAAGlB,aAAa,CAACU,YAAY,CAAC,CACpE,KAAM,CAACS,KAAK,CAAEC,QAAQ,CAAEC,aAAa,CAAC,CAAGpB,aAAa,CAACU,YAAY,CAAC,CACpE,KAAM,CAAAW,gBAAgB,CAAG7B,MAAM,CAAiB,IAAI,CAAC,CACrD,KAAM,CAAC8B,iBAAiB,CAAEC,oBAAoB,CAAC,CAAG9B,QAAQ,CAA2B,IAAI,CAAC,CAE1F,KAAM,CAAA+B,SAAS,CAAGjC,WAAW,CAC1BkC,MAAyB,EAAKN,QAAQ,CAAEO,GAAG,EAAKzB,OAAO,CAACwB,MAAM,CAAEC,GAAG,CAAC,CAAC,CACtE,CAACP,QAAQ,CACX,CAAC,CAED,KAAM,CAAAQ,MAAM,CAAGpC,WAAW,CACvBqC,KAAsB,EAAK,KAAAC,qBAAA,CAC1BD,KAAK,CAACE,cAAc,CAAC,CAAC,CAEtB;AACA,KAAM,CAAAC,IAAI,CAAGH,KAAK,CAACI,YAAY,CAACC,OAAO,CAAC,uBAAuB,CAAC,CAChE,GAAI,CAACF,IAAI,EAAI,CAACT,iBAAiB,CAAE,OAEjC,KAAM,CAAAY,eAAe,EAAAL,qBAAA,CAAGR,gBAAgB,CAACc,OAAO,UAAAN,qBAAA,iBAAxBA,qBAAA,CAA0BO,qBAAqB,CAAC,CAAC,CACzE,GAAI,CAACF,eAAe,CAAE,OAEtB,KAAM,CAAAG,QAAQ,CAAGf,iBAAiB,CAACgB,OAAO,CAAC,CACzCC,CAAC,CAAEX,KAAK,CAACY,OAAO,CAAGN,eAAe,CAACO,IAAI,CACvCC,CAAC,CAAEd,KAAK,CAACe,OAAO,CAAGT,eAAe,CAACU,GACrC,CAAC,CAAC,CAEF,GAAI,CAAAC,KAAK,CAAG,EAAE,CACd,GAAId,IAAI,GAAK,UAAU,CAAEc,KAAK,CAAG,gBAAgB,CACjD,GAAId,IAAI,GAAK,QAAQ,CAAEc,KAAK,CAAG,cAAc,CAE7C,KAAM,CAAAC,OAAa,CAAG,CACpBnC,EAAE,CAAEC,KAAK,CAAC,CAAC,CACXmB,IAAI,CAAE,UAAU,CAChBM,QAAQ,CACRU,IAAI,CAAE,CAAEF,KAAK,CAAEG,aAAc,CAC/B,CAAC,CAEDhC,QAAQ,CAAEiC,GAAG,EAAKA,GAAG,CAACC,MAAM,CAACJ,OAAO,CAAC,CAAC,CACxC,CAAC,CACD,CAACxB,iBAAiB,CAAEN,QAAQ,CAC9B,CAAC,CAED,KAAM,CAAAgC,aAAa,CAAGA,CAACrC,EAAU,CAAEwC,QAAgB,GAAK,CACtDnC,QAAQ,CAAEiC,GAAG,EACXA,GAAG,CAACG,GAAG,CAAEC,IAAI,EACXA,IAAI,CAAC1C,EAAE,GAAKA,EAAE,CACV,CAAE,GAAG0C,IAAI,CAAEN,IAAI,CAAE,CAAE,GAAGM,IAAI,CAACN,IAAI,CAAEF,KAAK,CAAEM,QAAQ,CAAEH,aAAc,CAAE,CAAC,CACnEK,IACN,CACF,CAAC,CACH,CAAC,CAED,KAAM,CAAAC,UAAU,CAAG/D,WAAW,CAAEqC,KAAsB,EAAK,CACzDA,KAAK,CAACE,cAAc,CAAC,CAAC,CACtBF,KAAK,CAACI,YAAY,CAACuB,UAAU,CAAG,MAAM,CACxC,CAAC,CAAE,EAAE,CAAC,CAEN,mBACEjD,KAAA,QAAKkD,KAAK,CAAE,CAAEC,KAAK,CAAE,OAAO,CAAEC,MAAM,CAAE,OAAO,CAAEC,OAAO,CAAE,MAAO,CAAE,CAAAC,QAAA,eAC/DxD,IAAA,CAACF,OAAO,GAAE,CAAC,cACXI,KAAA,QACEuD,GAAG,CAAExC,gBAAiB,CACtBmC,KAAK,CAAE,CAAEM,QAAQ,CAAE,CAAC,CAAEJ,MAAM,CAAE,OAAO,CAAEK,UAAU,CAAE,GAAI,CAAE,CAAAH,QAAA,eAGzDxD,IAAA,QAAKoD,KAAK,CAAE,CAAEQ,OAAO,CAAE,EAAE,CAAE3B,QAAQ,CAAE,UAAU,CAAEO,GAAG,CAAE,EAAE,CAAEqB,KAAK,CAAE,EAAE,CAAEC,MAAM,CAAE,GAAI,CAAE,CAAAN,QAAA,cACjFxD,IAAA,WACEoD,KAAK,CAAE,CACLQ,OAAO,CAAE,UAAU,CACnBG,QAAQ,CAAE,EAAE,CACZC,YAAY,CAAE,CAAC,CACfC,UAAU,CAAE,SAAS,CACrBC,KAAK,CAAE,MAAM,CACbC,MAAM,CAAE,MAAM,CACdC,MAAM,CAAE,SACV,CAAE,CACFC,OAAO,CAAEA,CAAA,GAAM,CACbC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAE,CAAE5D,KAAK,CAAEG,KAAM,CAAC,CAAC,CACxC0D,KAAK,CAAC,wEAAwE,CAAC,CACjF,CAAE,CAAAhB,QAAA,CACH,QAED,CAAQ,CAAC,CACN,CAAC,cACNtD,KAAA,CAACX,SAAS,EACRoB,KAAK,CAAEA,KAAM,CACbG,KAAK,CAAEA,KAAM,CACbD,aAAa,CAAEA,aAAc,CAC7BG,aAAa,CAAEA,aAAc,CAC7BI,SAAS,CAAEA,SAAU,CACrBqD,OAAO,MACPlD,MAAM,CAAEA,MAAO,CACf2B,UAAU,CAAEA,UAAW,CACvBwB,MAAM,CAAEvD,oBAAqB,CAC7BhB,SAAS,CAAEA,SAAU,CAAAqD,QAAA,eAErBxD,IAAA,CAACR,OAAO,GAAE,CAAC,cACXQ,IAAA,CAACP,QAAQ,GAAE,CAAC,cACZO,IAAA,CAACN,UAAU,GAAE,CAAC,EACL,CAAC,EACT,CAAC,EACH,CAAC,CAEV,CAEA,cAAe,CAAAgB,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}